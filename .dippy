# Dippy config for Parable

#---- Python ----#
deny python3 "Use `uv run python` to run in project env"
deny python "Use `uv run python` to run in project env"
allow uv run python
allow uv run python3
allow rm -rf /**/__pycache__
deny uv run ruff "Use `just fmt --fix and just lint --fix`"
deny uv run tests "use `just test`"

#---- Just targets ----#
allow just check
allow just check-style
allow just fmt
allow just lint
allow just profile*
allow just test*
deny just test-all "Don't worry about other Python versions, `just test` and `just check` are all you need"
allow just transpile*

#---- Bash ----#
deny bash * "Use `~/source/bash-oracle/bash-oracle -e`"
deny node tests/* "Use `just test-js`"
deny-redirect * "Redirects only allowed to /tmp/* or to stdin/stderr"
allow-redirect /tmp/**

#---- Javascript ----#
allow node -e

#---- Scripts ----#
allow bin/parable-dump.py
allow ~/source/bash-oracle/bash-oracle *
deny tests/bin/run-tests.py *bigtable* "There's no test runner for the bigtable tests, if `just check` passes, you're ready to commit"

#---- Go ----#
allow go run
