# Transpile source to src/parable.ts
transpile source_file transpiler_dir:
    uv run --directory "{{transpiler_dir}}" python -m src.tongues --target typescript < "{{source_file}}" > src/parable.ts

# Build the module
build:
    npm run build

# Run tests
check source_file transpiler_dir tests_dir:
    just transpile "{{source_file}}" "{{transpiler_dir}}"
    npm run build
    PARABLE_PATH="$(pwd)/dist" node bin/run-tests.js "{{tests_dir}}"
